import java.nio.file.FileSystems
import java.nio.file.Files

apply plugin: 'java'
apply plugin: 'eclipse'

sourceCompatibility = 1.7

tasks.withType(JavaCompile){
   options.encoding = 'UTF-8'
}

tasks.withType(Javadoc){
   options.encoding = 'UTF-8'
}

javadoc{
   options.charSet = 'UTF-8'
}
   
eclipse {
   jdt {
     sourceCompatibility = 1.7
     targetCompatibility = 1.7
   }
}

repositories {
   mavenCentral()
}

dependencies {
   compile 'org.postgresql:postgresql:9.4-1200-jdbc4'
   compile 'mysql:mysql-connector-java:5.1.38'
}

jar {

    configurations.compile.each { File path ->
        String buildJarFolder = "build/lib"
        if(!new File(buildJarFolder).exists()){
            new File(buildJarFolder).mkdirs();
        }
        String newJarFilePath = buildJarFolder + "/" + path.name
        if(!new File(newJarFilePath).exists()){
            Files.copy(path.toPath(), FileSystems.getDefault().getPath(newJarFilePath))
        }

    }
}